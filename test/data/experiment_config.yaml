api:
  ceph_path: s3://zhangming
  coordinator_ip: 10.5.36.31
  coordinator_port: 8294
  learner_port: 8293
  manager_ip: 10.5.36.31
  manager_port: 8295
common:
  load_path: ''
  name: ZergStat
  only_evaluate: false
  save_path: ./test
  time_wrapper_type: cuda
data:
  eval:
    batch_size: 1
    beginning_build_order_num: 20
    beginning_build_order_prob: 1.0
    cumulative_stat_prob: 1.0
    dataloader_type: epoch
    dataset_type: replay_eval
    ignore_camera: true
    num_workers: 0
    output_path: null
    replay_list: /mnt/lustre/share_data/parrots_model_data/sensewow/diff_size_total.eval
    same_size_map: false
    stepwise: false
    units_order_type: type
    use_available_action_transform: true
    use_ceph: true
    use_distributed: true
    use_enemy_upgrades: true
    use_global_cumulative_stat: true
    use_repeat: false
    use_stat: true
  train:
    Z_random_type: episode
    batch_size: 3
    beginning_build_order_num: 20
    beginning_build_order_prob: 0.8
    cumulative_stat_prob: 0.5
    dataloader_type: iter
    dataset_type: replay
    ignore_camera: true
    num_workers: 0
    replay_cache_size: 15
    replay_list: /mnt/lustre/share_data/parrots_model_data/sensewow/diff_size_total.train
    same_size_map: false
    slide_window_step: 64
    total_iter: 1e10
    trajectory_len: 64
    trajectory_type: sequential
    units_order_type: type
    use_available_action_transform: true
    use_ceph: true
    use_distributed: true
    use_enemy_upgrades: true
    use_global_cumulative_stat: true
    use_repeat: false
    use_stat: true
data_reader:
- CephReader
- CephReader
env: {}
logger:
  eval_freq: 1000
  print_freq: 10
  save_freq: 200
  var_record_type: alphastar
max_step: null
model:
  encoder:
    core_lstm:
      dropout: 0
      hidden_size: 384
      input_size: 1792
      lstm_type: normal
      num_layers: 3
    obs_encoder:
      encoder_names:
      - scalar_encoder
      - spatial_encoder
      - entity_encoder
      entity_encoder:
        activation: relu
        dropout_ratio: 0
        head_dim: 128
        head_num: 2
        hidden_dim: 1024
        input_dim: 1340
        layer_num: 3
        ln_type: post
        mlp_num: 2
        output_dim: 256
      scalar_encoder:
        activation: relu
        begin_num: 20
        output_dim: 1280
        use_stat: true
      spatial_encoder:
        activation: relu
        down_channels:
        - 64
        - 128
        - 128
        downsample_type: conv2d
        fc_dim: 256
        input_dim: 52
        norm_type: none
        project_dim: 32
        resblock_num: 4
      use_score_cumulative: false
    scatter:
      input_dim: 256
      output_dim: 32
      scatter_type: add
    score_cumulative:
      activation: relu
      input_dim: 13
      output_dim: 64
  freeze_targets: []
  policy:
    head:
      action_type_head:
        action_map_dim: 256
        action_num: 327
        activation: relu
        context_dim: 256
        gate_dim: 1024
        input_dim: 384
        ln_type: normal
        norm_type: LN
        res_dim: 256
        res_num: 16
        use_mask: false
      delay_head:
        activation: relu
        decode_dim: 256
        delay_dim: 128
        delay_map_dim: 256
        input_dim: 1024
      head_names:
      - action_type_head
      - delay_head
      - queued_head
      - selected_units_head
      - target_unit_head
      - location_head
      location_head:
        activation: prelu
        input_dim: 1024
        location_expand_ratio: 1
        map_skip_dim: 128
        output_type: cls
        res_dim: 128
        res_num: 4
        reshape_channel: 4
        reshape_size:
        - 16
        - 16
        upsample_dims:
        - 128
        - 64
        - 1
        upsample_type: bilinear
        use_mask: false
      queued_head:
        activation: relu
        decode_dim: 256
        input_dim: 1024
        queued_dim: 2
        queued_map_dim: 256
      repeat_head:
        activation: relu
        decode_dim: 256
        input_dim: 1024
        repeat_dim: 17
        repeat_map_dim: 256
      selected_units_head:
        activation: relu
        entity_embedding_dim: 256
        func_dim: 256
        hidden_dim: 32
        input_dim: 1024
        key_dim: 32
        lstm_dropout: 0.0
        lstm_norm_type: none
        lstm_type: pytorch
        max_entity_num: 64
        num_layers: 1
        unit_type_dim: 259
        units_reorder: false
        use_mask: false
      target_unit_head:
        activation: relu
        entity_embedding_dim: 256
        func_dim: 256
        input_dim: 1024
        key_dim: 32
        unit_type_dim: 259
        use_mask: false
    location_expand_ratio: 1
    sl_training: true
    use_repeat: false
  state_dict_mask: []
  use_battle_reward: false
  use_value_network: false
  value:
    battle:
      cum_stat_keys:
      - unit_build
      - effect
      - research
      name: battle
      param:
        activation: relu
        input_dim: 1792
        norm_type: LN
        res_dim: 256
        res_num: 16
    build_order:
      cum_stat_keys:
      - unit_build
      - effect
      - research
      name: build_order
      param:
        activation: relu
        input_dim: 1792
        norm_type: LN
        res_dim: 256
        res_num: 16
    built_unit:
      cum_stat_keys:
      - unit_build
      name: built_unit
      param:
        activation: relu
        input_dim: 1664
        norm_type: LN
        res_dim: 256
        res_num: 16
    effect:
      cum_stat_keys:
      - effect
      name: effect
      param:
        activation: relu
        input_dim: 1664
        norm_type: LN
        res_dim: 256
        res_num: 16
    upgrade:
      cum_stat_keys:
      - research
      name: upgrade
      param:
        activation: relu
        input_dim: 1664
        norm_type: LN
        res_dim: 256
        res_num: 16
    winloss:
      cum_stat_keys:
      - unit_build
      name: winloss
      param:
        activation: relu
        input_dim: 1664
        norm_type: LN
        res_dim: 256
        res_num: 16
pavi: true
pavi_project: default
seed: 1024
train:
  criterion:
    action_type: normal
    kwargs:
      smooth_ratio: 0.1
    type: soft_focal_loss
  grad_clip_begin_step: 1000
  grad_clip_norm_type: '2'
  grad_clip_threshold: 5.0
  grad_clip_type: max_norm
  learning_rate: 1e-3
  load_optimizer: true
  loss_weight:
    action_type: 30.0
    delay: 9.0
    queued: 1.0
    repeat: 0.1
    selected_units: 4.0
    target_location: 8.0
    target_units: 4.0
  max_epochs: 1000
  max_iterations: 1e9
  parallel: true
  regularization_type: adamW
  select_loss_type: normal
  temperature: 1.0
  use_cuda: true
  use_distributed: true
  use_repeat: false
  use_warm_up: false
  warm_up_T: 2000
  weight_decay: 1e-5
